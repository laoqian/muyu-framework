<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="muyu.system.dao.MenuDao">
    <select id="findList" resultType="Menu">
        select
          id AS "id",
          parent_id AS "parentId",
          name AS "name",
          icon AS "icon",
          is_show AS "isShow",
          href AS "href"
        from sys_menu
        where del_flag='0'
    </select>
    <select id="findTree" resultType="Menu">
            SELECT
              a.id              AS "id",
              a.parent_id       AS "parentId",
              a.name            AS "name",
              a.icon            AS "icon",
              is_show           AS "isShow",
              a.href            AS "href",
              a.sort            AS "sort",
              level             AS "level",
              connect_by_isleaf AS "leaf"
            FROM sys_menu a
            START WITH a.parent_id  = #{rootIdfindList}
            CONNECT BY PRIOR a.id   = a.parent_id
            ORDER SIBLINGS BY sort
    </select>
    <select id="get" resultType="Menu">
        SELECT
            a.id         AS "id",
            a.parent_id  AS "parentId",
            a.name       AS "name",
            a.icon       AS "icon",
            a.sort       AS "sort",
            a.href       AS "href"
        FROM sys_menu a
        WHERE a.id=#{id}
    </select>
    <insert id="insert">
        INSERT INTO sys_menu
        (id,
        parent_id,
        name,
        icon,
        href,
        sort,
        is_show,
        create_by,
        create_date,
        update_by,
        update_date,
        remarks
        )
        VALUES (
        #{id},
        #{parentId},
        #{name},
        #{icon},
        #{href},
        #{sort},
        #{isShow},
        #{createBy.id},
        #{createDate},
        #{updateBy.id},
        #{updateDate},
        #{remarks}
        )
    </insert>
    <update id="update">
          UPDATE sys_menu SET
              parent_id=#{parentId},
              name=#{name},
              icon=#{icon},
              sort=#{sort},
              href=#{href},
              is_show=#{isShow},
              update_by =   #{updateBy.id},
              update_date =   #{updateDate},
              remarks =#{remarks}
          WHERE id=#{id}
    </update>
    <delete id="delete">
          DELETE from sys_menu
          WHERE id=#{id}
    </delete>
</mapper>